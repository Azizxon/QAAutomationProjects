# webTestingAutomation
ЗАПУСК

- -Dtest=PaymentMobileTest -Dbrowser=firefox verify<br/>
- -Dtest=PaymentMobileTest -Dbrowser=chrome verify<br/>

# Задание 1

ПОДГОТОВКА ОКРУЖЕНИЯ

- Для работы понадобятся jdk 1.8, IDEA, maven. 

- С сайта https://www.seleniumhq.org/download/ скачать драйвера Google Chrome Driver и Mozilla GeckoDriver последней версии для вашей ОС (сами браузеры должны быть предустановлены). Разместить драйвера в какой-нибудь отдельной директории и прописать эту директорию в переменную окружения PATH

- Установить плагин chrome Katalon studio recorder



ЗАПИСЬ ТЕСТА РЕКОРДЕРОМ

В браузере хром записать рекордером тест:

- Открыть сайт https://www.tinkoff.ru - Из меню нажатием на поле “Платежи” перейти на страницу https://www.tinkoff.ru/payments/

- Поле поиска “Название или ИНН получателя платежа” заполнить значением “Тинькофф Мобайл”

- Из выпадающего списка выбрать кликнуть на пункт “Тинькофф Мобайл (Мобильная связь)”

- На странице https://www.tinkoff.ru/payments/provider-tinkoff-mobile/ в произвольном месте с помощью щелчка правой кнопки мыши из контекстного меню выбрать Katalon Recorder -> assertTitle. В окне рекордера отредактировать шаг - заменить команду assertTitle на waitForTitle

- В поле сумма ввести значение “5”

- Нажать на кнопку “Оплатить”

- Добавить 2 команды-проверки в тест. В полях “Сумма” и “Номер телефона” с помощью щелчка правой кнопки мыши на полях с сообщением об ошибке (“Поле обязательное” и “Минимум — 10 ₽”) из контекстного меню выбрать Katalon Recorder -> assertText ) 



ЭКСПОРТ

В рекодере из верхнего меню выполнить нажатие на export выбрать формат java (WebDriver+TestNG).

p.s. лучше сразу тест в рекордере назвать так же как имя класса в проекте. 



ПРОЕКТ


В проекте в директории src/test/java создать java класс под новый тест, скопировать в него содержимое экспорта.

Удалить лишнее из класса (по аналогии с учебным проектом): 

- Строку “package com.example.tests;”, Все приватные методы в конце класса, throws Exception. 

- В переменных класса оставить только WebDriver driver, String baseUrl. В методе tearDown() оставить только driver.quit(). 

- baseUrl заменить на https://www.tinkoff.ru/



В pom-файле добавить зависимости:

https://mvnrepository.com/artifact/org.seleniumhq.selenium/selenium-java/3.11.0

https://mvnrepository.com/artifact/org.testng/testng/6.14.2



Проверить работу теста запуском теста из класса



Выделить BaseRunner, BrowserFactory (ff и chrome, случайный выбор делать не нужно), а сам тест поместить в отдельный класс по аналогии с учебным проектом

Сделать maven-строку запуска с возможностью явно указать используемый браузер (Пример строк есть в учебном проекте README.md)

# Задание 2

Внести доработки в тест из предыдущего задания



1. При помощи настроек опций браузера отключить всплывающие уведомления chrome и firefox (см. презентацию)

2. Используя явные ожидания (WebDriverWait) избавиться от всех конструкций, использующих принудительные остановки (Thread.sleep)

3. Вставить в начало теста несколько шагов (без использования рекордера):

             - Открыть главную страницу Google

             - В строку поиска ввести tinkoff

             - Нажать клавишу Enter (Или кнопку "Поиск в Google")

             - В результате поисковой выдачи найти ссылку, которая ведет на https://www.tinkoff.ru/

             - Выполнить переход по ссылке (в случае Chrome сайт откроется в новой вкладке, Firefox - в новом окне)

             - Используя команды из презентации переключиться к вкладке/окну с сайтом

4. Переписать все локаторы из теста используя только CSS (By.cssSelector)

5. Создать новый такой же тест из этого (скопировать). Заменить все локаторы на Xpath (By.xpath)            



В результате должно получиться два одинаковых теста, использующие разные типы селекторов (локаторов)



ПРИМЕЧАНИЕ:

1 . В ходе лекции я показывал как проверять локаторы в Chrome:

- xpath с помощью плагина xpath helper

- CSS с помощью инструментов разработчика во вкладке Console с помощью команды $$('локатор')

Так же показал, что на вкладке Elements, вызвав окно поиска ('CTRL+F') в строке поиска можно находить любой вид селектора. Но этот поиск одновременно реализует ещё и обычный поиск по тексту, и на странице с учебной шпаргалкой будет находить как сам элемент, так и текст в таблице.

2. Чтоб использовать плагин xpath helper для работы с локальными файлами, надо активировать соответствующую опцию. Для этого надо нажать правой кнопкой мыши по иконке с плагином, из контекстного меню выбрать пункт 'Управление расширениями' и активировать опцию 'Разрешить открывать локальные файлы по ссылкам'



Дополнительное домашнее задание (по желанию)



1. Открыть https://www.tinkoff.ru/

2. Из верхнего меню по нажатию "Мобайл" выполнить переход на страницу Тинькофф Мобайл

3. Выполнить переход на вкладку Тарифы

4. Выполнить скролл до появления всплывающего желтого окошка (с кнопкой "Оформить" и суммой ежемесячного платежа). Запомнить значение суммы стартового предложения в локальной переменной.

5. Обнулить все пакеты и отключить все дополнительные услуги

Убедится в том, что сумма предложения станет 0 рублей, а кнопка "Получить SIM-карту" станет не активна

6. Обновить страницу и убедиться, что стартовое предложение вернулось в первоначальное значение (шаг 4)

7. Выбрать безлимитного пакета интернета и убедиться, что все элементы из блока "Другие безлимитных сервисов" скрылись

8. Убедиться в том, что безлимитный пакет интернета дороже набора из пакета 15 ГБ + сумма всех безлимитных сервисов

9. Проверить скролл по нажатию кнопки "Заказать SIM-карту"



Отправка задания:



Тот же репозиторий. Присылать нужно ссылку на последний коммит.

Коммиты, сделанные после дедлайна не принимаются
